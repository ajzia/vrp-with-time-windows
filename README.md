# VRPTW

[![Build Status](https://github.com/ajzia/VRPTW.jl/actions/workflows/CI.yml/badge.svg?branch=main)](https://github.com/ajzia/VRPTW.jl/actions/workflows/CI.yml?query=branch%3Amain)

# Installation

To install the package, run the following commands in the Julia REPL:

```julia
  julia> ]
  pkg> add https://github.com/ajzia/vrp-with-time-windows
```

# VRPTW instances

To optain the VRPTW instances, you can find and download the zip files from [here](https://www.sintef.no/projectweb/top/vrptw/).

Based on the instance's origin, place them in the following folders:
- Solomon instances: `resources/Solomon`
- Gehring-Homberger instances: `resources/Homberger`

# Usage

To use the package, run the following commands in the Julia REPL:

```julia
  using VRPTW
```

## Solving a VRPTW instance

Reading an instance:

```julia
  # Read an instance with all available customers
  instance = read_instance("resources/Solomon/C101.txt")
  # Read an instance with different number of customers
  instance = read_instance("resources/Solomon/C101.txt", 25)
```

Running nearest neighbor algorithm:

```julia
  solution = nearest_neighbor(instance)
```

Running ant colony system algorithm:

```julia
  solution = ant_colony_system(
    instance,                   # instance
    initial_solution,           # initial route and its cost
    (stop_condition, max_stop), # stop condition
    selection,                  # selection type
    no_ants = 10,               # number of ants
    q_0 = 0.9,                  # probability of choosing the best route
    tau_0 = 0.1,                # initial pheromone value
    rho = 0.1,                  # pheromone evaporation rate
    beta = 1.0,                 # pheromone importance
  )
```

### Available selection types:

- roulette wheel selection, O(n) and O(1)
```julia
  roulette_wheel, stochastic_acceptance
```

- torunament selection, O(n)
```julia
  tournament
```

### Available stop conditions:

- maximum number of iterations
```julia
  maximum_iterations
```

- maximum number of iterations without improvement
```julia
  maximum_iterations_with_no_improvement
```

- elapsed time
```julia
  maximum_time
```

## Generating results, plots and tables

#### Results file

To generate a results file, run the following command:

```julia
  generate_results(
    [
      instance_origin, # "S" or "H"
      list_of_instances, # string with instances' names, seperated by a comma, ex. "C101,R204..." 
      stop_condition, # "max_it", "no_imp", "max_time"
      maximum_stop_value, # ex. 1000 (iterations) or 60 (seconds)
      population_size,
      q_0,
      rho,
      selection, # "r" or "t"
      repetitions, # number of repetitions
    ]
  )
```

The file will appear in the `results/tuning` folder.

#### Generating tables

Tables can be generated by running the following command:

```julia
  read_tuning(tuning_folder)
```

where `tuning_folder` is the folder in `results/tuning` directory.

#### Generating prd plots:

Plots can be generated by running the following command:

```julia
  plot_prd(tuning_folder, path_to_results_file)
```

#### Routes

It is also possible to generate plots of routes for a given instance.
To generate the plot, solution must be saved using the following function:

```julia
  write_results(instance, nearest_neighbour_results, acs_results, save_coords=true)
```

where `save_coords` is a boolean value, which determines whether the coordinates of the customers should be saved in the results file.

Then, the plot can be generated by running the following command:

```julia
  plot_routes(path_to_results_file)
```
